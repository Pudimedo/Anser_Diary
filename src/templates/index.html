{% extends "base.html" %}

{% block head %}
    {{super()}}
    <title> Anser Diary </title>
{% endblock head %}

{% block content %}
<div class="container">
    {% if current_user.is_authenticated %}
        <section class="create-diary">
            <h2>Crie um novo diário</h2>
            <form method="post" class="create-diary-form">
                <input type="hidden" name="action" value="create">
                <input type="text" name="title" placeholder="Título para o diário de hoje...">
                <button type="submit" class="btn">Criar Diário</button>
            </form>
        </section>
        
        <hr>

        <section class="diaries-section">
            <h2>Meus Diários</h2>
            {% if diaries %}
                <div class="diaries-grid"> 
                    {% for diary in diaries %}
                        <div class="diary-card">
                            <h3>{{ diary.dia_title }}</h3>
                            <div class="diary-actions">
                                <a href="{{ url_for('diary', diary_id=diary.dia_id) }}" class="btn">Acessar</a>
                                
                                <form method="post" onsubmit="return confirm('Tem certeza que deseja apagar este diário?');" style="display: inline;">
                                    <input type="hidden" name="action" value="delete">
                                    <input type="hidden" name="diary_id" value="{{ diary.dia_id }}">
                                    <button type="submit" class="btn btn-danger">Apagar</button>
                                </form>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p class="no-diaries-message">Você ainda não criou nenhum diário. Que tal começar agora?</p>
            {% endif %}
        </section>
    
    {% else %}
        <div style="text-align: center; padding: 4rem 1rem;">
            
            <h1>Bem-vindo ao Anser Diary</h1>
            <p style="font-size: 1.2rem; margin-top: 1rem;">Seu refúgio digital para pensamentos, memórias e reflexões.</p>
            <div style="margin-top: 2rem;">
                <a href="{{ url_for('register') }}" class="btn">Crie sua conta gratuitamente</a>
                <a href="{{ url_for('login') }}" class="btn btn-secondary" style="margin-left: 1rem;">Já tenho uma conta</a>
            </div>
        </div>
    {% endif %}
</div>
{% endblock content %}